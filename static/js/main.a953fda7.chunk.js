(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(279)},116:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(16),o=n.n(i),r=(n(116),n(17)),l=n(18),c=n(21),u=n(19),p=n(22),d=n(20),h=n(97),m=n.n(h),f=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"tokenRequestUrl",value:function(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname;return"https://accounts.spotify.com/authorize?client_id=aed1fb11b28a4236aafa2241b827155f&redirect_uri="+encodeURIComponent(e)+"&response_type=token&scope="+encodeURIComponent(["playlist-modify-public"])}},{key:"render",value:function(){return s.a.createElement("a",{className:"GetToken",target:"",href:this.tokenRequestUrl()},"Authorize Spotify App")}}]),t}(a.Component),g=n(110),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateChosenGenres=n.updateChosenGenres.bind(Object(p.a)(n)),n.state={error:null,isLoaded:!1,genres:["Loading Genres"]},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"formatGenreData",value:function(e){var t=[];return e.genres.map(function(e){return t.push({value:e,label:e})}),t}},{key:"updateChosenGenres",value:function(e){this.props.updateChosenGenres(e)}},{key:"componentDidMount",value:function(){var e=this,t=this;this.props.spotify.getAvailableGenreSeeds().then(function(e){t.setState({genres:t.formatGenreData(e),isLoaded:!0})},function(t){e.props.invalidateToken()})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.state.error?401===this.state.error.status?s.a.createElement("h3",null,"Token expired, please request a new one:"):s.a.createElement("h3",null,"Error loading Genre List"):this.isLoaded?s.a.createElement("h3",null,"Loading Genre List..."):s.a.createElement("ul",{className:"genreList"},s.a.createElement("span",null,"Genres:"),s.a.createElement(g.a,{onChange:this.updateChosenGenres,autoFocus:!0,isMulti:!0,options:this.state.genres,placeholder:"Choose up to 5 genres"}))}}]),t}(a.Component),v=n(101),b=n.n(v),k=(n(142),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:{min:n.props.minCadence,max:n.props.maxCadence},min:80,max:100},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t={min:this.props.minCadence,max:this.props.maxCadence};return s.a.createElement("div",{className:"bpmRangeContainer"},s.a.createElement(b.a,{maxValue:200,minValue:20,draggableTrack:!0,value:t,onChange:function(t){return e.props.updateCadence(t.min,t.max)}}))}}]),t}(a.Component)),C=n(25),E=n.n(C),O=n(58),j=n.n(O),L=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getRecommendations=n.getRecommendations.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"updateSongList",value:function(e){this.props.updateSongListNeedsUpdate(!1),this.props.updateSongList(e)}},{key:"getSeedValues",value:function(e){var t=[];return e.forEach(function(e){t.push(e.value)}),t}},{key:"getRecommendations",value:function(){var e=this,t={limit:50,seed_genres:this.getSeedValues(this.props.chosenGenres),target_danceability:.9,min_tempo:this.props.minCadence,max_tempo:this.props.maxCadence};this.props.spotify.getRecommendations(t,function(t,n){t?console.log(t):e.updateSongList(n.tracks)})}},{key:"render",value:function(){return this.props.seedCount>=1&&this.props.seedCount<=5?this.props.songListNeedsUpdate?s.a.createElement("div",null,s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.getRecommendations},"Get Songs",s.a.createElement(j.a,{className:"rightIcon"}))):s.a.createElement("div",null,s.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.getRecommendations},"Get Songs",s.a.createElement(j.a,{className:"rightIcon"}))):0===this.props.seedCount?s.a.createElement(E.a,{variant:"contained",color:"primary",disabled:!0},"Get Songs"):this.props.seedCount>5?s.a.createElement("div",null,"Please select 5 or less options"):s.a.createElement("div",null,"Something went wrong...")}}]),t}(a.Component),N=n(57),S=n.n(N),U=n(103),w=n.n(U),G=n(106),T=n.n(G),x=n(104),I=n.n(x),V=n(105),P=n.n(V),R=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.songList.map(function(e){return s.a.createElement(w.a,{key:e.uri,alignItems:"flex-start"},s.a.createElement(I.a,null,s.a.createElement(P.a,{src:e.album.images[2].url})),s.a.createElement(T.a,{primary:e.name,secondary:e.album.name}))});return s.a.createElement(S.a,{className:"songList"},e)}}]),t}(a.Component),_=n(108),A=n.n(_),D=n(107),M=n.n(D),W=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getPlaylist=n.getPlaylist.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.state={error:null,isReturned:!1,spotifyUser:null,playlistNameInputValue:"",playlistUrl:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserId()}},{key:"handleChange",value:function(e){this.setState({playlistNameInputValue:e.target.value})}},{key:"buildSongUriArray",value:function(e){var t=[];return e.map(function(e){return t.push(e.uri)}),t}},{key:"getUserId",value:function(){var e=this;this.props.spotify.getMe().then(function(t){e.setState({spotifyUser:t})},function(e){console.error(e)})}},{key:"fillPlaylist",value:function(e){this.props.spotify.addTracksToPlaylist(e,this.buildSongUriArray(this.props.songList)).then(function(){},function(e){console.error(e)})}},{key:"getPlaylist",value:function(){var e=this,t=""!==this.state.playlistNameInputValue?this.state.playlistNameInputValue:"New Playlist";this.props.spotify.createPlaylist(this.state.spotifyUser.id,{name:t+" (Cadence)",public:!0}).then(function(t){e.fillPlaylist(t.id),e.setState({playlistUrl:t.external_urls.spotify})},function(e){console.error(e)})}},{key:"render",value:function(){return null!=this.state.spotifyUser?s.a.createElement("div",{className:"create_playlist"},s.a.createElement(M.a,{label:"Playlist Name",value:this.state.playlistNameInputValue,onChange:this.handleChange}),s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.getPlaylist},"Create Playlist",s.a.createElement(A.a,{className:"rightIcon"})),""!==this.state.playlistUrl?s.a.createElement(E.a,{variant:"contained",href:this.state.playlistUrl,target:"_blank"},"Open Playlist"):s.a.createElement(s.a.Fragment,null)):s.a.createElement("div",null)}}]),t}(a.Component),q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateSongListNeedsUpdate=function(e){n.setState({songListNeedsUpdate:e})},n.updateChosenGenres=function(e){n.setState({chosenGenres:e,songListNeedsUpdate:!0})},n.updateSongList=function(e){n.setState({songList:e})},n.updateCadence=function(e,t){n.setState({minCadence:e,maxCadence:t,songListNeedsUpdate:!0})},n.spotify=new m.a,n.props.haveToken&&n.spotify.setAccessToken(n.props.token),n.state={chosenGenres:[],minCadence:170,maxCadence:190,songList:[],songListNeedsUpdate:!0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.seedCount=this.state.chosenGenres.length,this.props.haveToken&&this.props.tokenValid?s.a.createElement("div",{className:"bodyContainer"},s.a.createElement(y,{spotify:this.spotify,invalidateToken:this.props.invalidateToken,updateChosenGenres:this.updateChosenGenres}),s.a.createElement(k,{minCadence:this.state.minCadence,maxCadence:this.state.maxCadence,updateCadence:this.updateCadence}),s.a.createElement(L,{spotify:this.spotify,invalidateToken:this.props.invalidateToken,updateSongList:this.updateSongList,seedCount:this.seedCount,chosenGenres:this.state.chosenGenres,minCadence:this.state.minCadence,maxCadence:this.state.maxCadence,songListNeedsUpdate:this.state.songListNeedsUpdate,updateSongListNeedsUpdate:this.updateSongListNeedsUpdate}),this.state.songList.length>0?s.a.createElement(W,{spotify:this.spotify,songList:this.state.songList}):s.a.createElement(s.a.Fragment,null),s.a.createElement(R,{songList:this.state.songList})):s.a.createElement("div",{className:"bodyContainer"},s.a.createElement(f,null))}}]),t}(a.Component),F=(n(278),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).invalidateToken=n.invalidateToken.bind(Object(p.a)(n)),n.state={haveToken:!!n.props.accessToken,tokenValid:!0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"invalidateToken",value:function(){this.setState({tokenValid:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",null,"Cadence"),s.a.createElement("h4",null,"Workout playlist generator")),s.a.createElement(q,{token:this.props.accessToken,haveToken:this.state.haveToken,tokenValid:this.state.tokenValid,invalidateToken:this.invalidateToken}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(F,{accessToken:function(){var e=window.location.hash.match(/#(?:access_token)=([\S\s]*?)&/);return e?e[1]:""}()}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,1,2]]]);
//# sourceMappingURL=main.a953fda7.chunk.js.map